<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>



        <ui:composition template="/welcomePrimefaces.xhtml">
            <ui:define name="head">
                <!--My: AIzaSyC9QjbZ1WMAhFenYPnoLi7IT_6pXyLo-bM 
                    AV: AIzaSyC9QjbZ1WMAhFenYPnoLi7IT_6pXyLo-bM
                    OT: AIzaSyC9QjbZ1WMAhFenYPnoLi7IT_6pXyLo-bM
                    JG: AIzaSyAdccFApU84ojEu-UhV4kh_Ebhn9N8FP0Y  
                    CR: AIzaSyBVC_EJlYqVfQzEMeUYXh3dMyCpTIDAk5U
                        AIzaSyC9QjbZ1WMAhFenYPnoLi7IT_6pXyLo-bM
                        AIzaSyDjY3ag9M_ieFSajk7wIMzJvnsO6VuMc_o
                        AIzaSyB7Nh5fgdgKzk8Hmy0cqeJjeaGrwHOpqDI
                
                AIzaSyB6lkALcwEfEez3ArJWscNptRgdiaABlrI
                -->
                <script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyAdccFApU84ojEu-UhV4kh_Ebhn9N8FP0Y"></script>
                
            </ui:define>
            <ui:define name="bodyJR">
                <p:growl id="msj" showDetail="true"/>

                <h:form id="form">                 
                    <center>
                        <p:tabView style="font-size:12px;margin-bottom: 1%;height: 100%;" dynamic="true" cache="true" >
                            <p:tab title="ACTIVIDADES MOVILES"  >
                                <f:facet name="actions" >
                                    <p:commandButton value="?" styleClass="buttonOverRed"  style="margin-left:20px;color:white;background:#3b63a9;font-weight:bold"/>
                                </f:facet>
                                <h:panelGrid columns="1" >
                                    <h:panelGrid columns="15"  >

                                        <p:outputLabel value="  "   /><p:outputLabel value="  "   /><p:outputLabel value="  "   /><p:outputLabel value="  "   />
                                        <p:outputLabel value="BUSCAR POR NOMBRE CLIENTE:"   />
                                        <p:inputText style="width:150px" id="txtnom" value="#{actividadesMovilController.filtroNombre}" />

                                        <p:selectOneMenu id="agencia" value="#{actividadesMovilController.filtroAgencia}" style="width:120px">
                                            <p:ajax update="asesor" listener="#{actividadesMovilController.listarAsesor()}" />
                                            <f:selectItems value="#{actividadesMovilController.lstAgencias}" var="age" itemValue="#{age.agenciaid}" itemLabel="#{age.agencia}"/>  
                                        </p:selectOneMenu>

                                        <p:selectOneMenu id="asesor" value="#{actividadesMovilController.filtroAsesor}" style="width:200px">
                                            <f:selectItems value="#{actividadesMovilController.lstAsesores}" var="ase" itemValue="#{ase.usuariotopaz}" itemLabel="#{ase.nombre}"/>  

                                        </p:selectOneMenu>


                                        <p:outputLabel value="TIPO VISITA"   />
                                        <p:selectOneMenu id="tipoV"  value="#{actividadesMovilController.filtroTipoV}" style="width:100px">
                                            <p:ajax update="resultado" listener="#{actividadesMovilController.onClickllenarFiltroResultados()}" />
                                            <f:selectItem  itemLabel="Todos" itemValue=""/>
                                            <f:selectItem  itemLabel="PROMOCIONES" itemValue="PROMOCION"/>
                                            <f:selectItem  itemLabel="COBRO" itemValue="COBRO"/>
                                            <f:selectItem  itemLabel="CLIENTE SUBSIGUIENTE" itemValue="CLIENTE_SUBSIGUIENTE"/>
                                            <f:selectItem  itemLabel="CLIENTE SEGUIMIENTO" itemValue="SEGUIMIENTO_CLIENTE"/>

                                        </p:selectOneMenu>
                                        <p:outputLabel value="RESULTADOS"   />
                                        <p:selectOneMenu id="resultado" value="#{actividadesMovilController.filtroResultadoV}" style="width:100px">
                                            <f:selectItem  itemLabel="TODOS" itemValue="0"/>
                                             <f:selectItem  itemLabel="SIN_PROCESAR" itemValue="SIN_PROCESAR"/>
                                            <f:selectItems value="#{actividadesMovilController.lstFiltrpResutados}" var="tip" itemValue="#{tip.resultado}" itemLabel="#{tip.resultado}"/>  

                                        </p:selectOneMenu>

                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-calendar" value="FECHAS" style="color:white;background:#3b63a9;font-weight:bold"  oncomplete="PF('wdlFechas').show();" update="dlgFechas" />

                                        <h:commandLink title="Exportar a Excel" style="border-color: #000000">
                                            <p:graphicImage name="images/export/excel.png" width="24"/>
                                            <p:dataExporter type="xls" target="tabla1"   fileName="ActividadesMovil" />
                                        </h:commandLink>

                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-refresh" value="CONSULTAR"  actionListener="#{actividadesMovilController.listarActi('x')}" style="color:white;background:#3b63a9;font-weight:bold" update="tabla1,paneltot1,panelactividades,dona,barra" />




                                    </h:panelGrid>



                                    <p:panel id="panelactividades" header="Actividades"  style="min-width: 1100px;margin-left: -20px;margin-right: -20px;margin-bottom: 1%;height: 100%;" >
                                        <f:facet name="actions" >
                                            <p:commandButton rendered="#{actividadesMovilController.validaEsGerente()==true and actividadesMovilController.filtroAsesor.equals('0')==false and 1==2}" styleClass="buttonOverRed" icon="fa fa-map-marker"  style="height: 15px;width: 40px; margin-left:20px;color:white;background:#3b63a9;font-weight:bold" oncomplete="PF('wdlUbicacion2').show();" actionListener="#{actividadesMovilController.verUbicacionesVisitas()}"  immediate="true" update="dlgUbicacion2,msj"  />
                                        </f:facet>
                                        <h:panelGrid columns="1"  >
                                            <p:dataTable id="tabla1"  emptyMessage="No hay Datos, selecione filttros y presione el boton CONSULTAR.." scrollable="true"  scrollHeight="400" style="font-size:9px;min-width: 1100px;margin-left: -10px;margin-right: -10px;margin-bottom: 1%;height: auto !important;" value="#{actividadesMovilController.lstActividades}" var="us" >

                                                <p:column headerText="NOMBRE_ASESOR" style="width:40px;" sortBy="#{us.nomasesor}">
                                                    <p:outputLabel value="#{us.nomasesor}" />
                                                </p:column>
                                                <p:column headerText="NOMBRE_CLIENTE" style="width:55px;;">
                                                    <p:outputLabel value="#{us.nombre!=null?us.nombre:us.nombrenuevo.toUpperCase()}" />
                                                </p:column>
                                                 <p:column headerText="TELEFONO" width="0" styleClass="vd-hidden-column">
                                                     <p:outputLabel value="#{us.telefonomovil!=null?us.telefonomovil:us.telefonofijo!=null?us.telefonofijo:us.telefononuevo}" />
                                                </p:column>
                                                <p:column headerText="TIPO_VISITA" style="width:25px;;" sortBy="#{us.tipovisita}">
                                                    <p:outputLabel value="#{us.tipovisita}" />
                                                </p:column>
                                                <p:column headerText="RESULTADO_VISITA" style="width:30px;;" sortBy="#{us.resultadovisita}">
                                                    <p:outputLabel value="#{us.resultadovisita}" />
                                                </p:column>
                                                <p:column headerText="FECHA_PROGRAMADA" style="width:25px;;" sortBy="#{us.fechaprovisita}">
                                                    <h:outputText value="#{us.fechaHoraProVisita}" >
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="FECHA_COMPLETADA" style="width:25px;;" sortBy="#{us.fechacompleto}">
                                                    <h:outputText value="#{us.fechacompleto}" >
                                                        <f:convertDateTime timeZone="GMT-6" pattern="dd/MM/yyyy h:mm a"/> 
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="N.PRESTAMO" style="width:14px;;">
                                                    <p:outputLabel value="#{us.prestamo}" />
                                                </p:column>
                                                <p:column  headerText="DEPARTAMENTO" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{us.departamento}" />
                                                </p:column>
                                                <p:column  headerText="MUNICIPIO" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{us.municipio}" />
                                                </p:column>
                                                <p:column  headerText="SECTOR" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{us.sector}" />
                                                </p:column>
                                                <p:column  headerText="BARRIO" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{us.barrio}" />
                                                </p:column>
                                                <p:column  headerText="AGENCIA" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{us.nomagencia}" />
                                                </p:column>
                                                <p:column  headerText="IDCLIENTE-ASESOR" width="0" styleClass="vd-hidden-column" exportable="#{actividadesMovilController.validaEsRH()}">
                                                    <p:outputLabel value="#{us.idclienteasesor}" />
                                                </p:column>
                                                <p:column  headerText="CUENTA-ASESOR" width="0" styleClass="vd-hidden-column" exportable="#{actividadesMovilController.validaEsRH()}">
                                                    <p:outputLabel value="#{us.cuentaasesor}" />
                                                </p:column>
                                                <p:column  headerText="EMPLEADOID" width="0" styleClass="vd-hidden-column" exportable="#{actividadesMovilController.validaEsRH()}">
                                                    <p:outputLabel value="#{us.empleadoid}" />
                                                </p:column>

                                                <p:column headerText="VER" style="width:1px;" exportable="false">
                                                    <center>
                                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-eye" style="color:black;background:gold;font-weight:bold"  immediate="true"  actionListener="#{actividadesMovilController.seleccionar(us,'U')}" update="dlgActividades"    />
                                                    </center>
                                                </p:column>
                                            </p:dataTable>
                                        </h:panelGrid>
                                    </p:panel> 

                                </h:panelGrid>
                                <h:panelGrid id="paneltot1" columns="10" style="margin-top:-5px;margin-bottom:0px" cellpadding="5"> 
                                    <p:outputLabel style="margin-left:20px" value="Resultados:"/>
                                    <p:inputNumber readonly="true" inputStyle="margin-left:-10px;width:50px;color:gold;background:black;" decimalPlaces="0" value="#{actividadesMovilController.lstActividades.size()}" /> 
                                </h:panelGrid>
                            </p:tab>
                           

                            <p:tab title="CONSOLIDADO"  >
                                <f:facet name="actions" >
                                    <p:commandButton value="?" styleClass="buttonOverRed"  style="margin-left:20px;color:white;background:#3b63a9;font-weight:bold"/>

                                </f:facet>


                                <h:panelGrid columns="2" >

                                    <p:panel header="Estilo Dona Por Tipo de Visita #{actividadesMovilController.textoGraficos}" id="dona" style="min-width: 700px;margin-left: 1px;margin-right: 1px;height: 100%;">
                                        <h:panelGrid columns="1"  >
                                           <div class="p-grid">
                                                <div class="p-col-6 p-lg-6 p-xl-4">
                                                    <div class="card">
                                                        <p:donutChart model="#{actividadesMovilController.donutModel}" style="width: 100%; height: 400px;"/>
                                                    </div>
                                                </div>
                                            </div>
                                                                            
                                        </h:panelGrid>
                                    </p:panel> 
                                     <p:panel header="Estilo Barra Comparacion(Agendas vs Completadas) #{actividadesMovilController.textoGraficos}" id="barra" style="min-width: 700px;margin-left: 1px;margin-right: 1px;height: 100%;">
                                      
                                           <div class="p-grid">
                                                <div class="p-col-12 p-lg-12 p-xl-4">
                                                    <div class="card">
                                                        
                                                        <p:barChart model="#{actividadesMovilController.barModel}" style="width: 100%; height: 400px;"/>
                                                    </div>
                                                </div>
                                            </div>
                                                                            
                                        
                                    </p:panel> 
                                   
  

                                </h:panelGrid>
                                <!-- -->
                              
                            <!-- -->
                            </p:tab>
                        
                        
                            <p:tab title="CLIENTES SIN VISITAR"  >
                                <f:facet name="actions" >
                                    <p:commandButton value="?" styleClass="buttonOverRed"  style="margin-left:20px;color:white;background:#3b63a9;font-weight:bold"/>

                                </f:facet>


                                <h:panelGrid columns="1" >


                                    <h:panelGrid columns="15"  >

                                        <p:outputLabel value="  "   /><p:outputLabel value="  "   /><p:outputLabel value="  "   /><p:outputLabel value="  "   />
                                        <p:outputLabel value="BUSCAR POR NOMBRE CLIENTE:"   />
                                        <p:inputText style="width:150px" id="txtnom2" value="#{actividadesMovilController.filtroNombre2}" />

                                        <p:selectOneMenu id="agencia2" value="#{actividadesMovilController.filtroAgencia2}" style="width:120px">
                                            <p:ajax update="asesor2" listener="#{actividadesMovilController.listarAsesor2()}" />
                                            <f:selectItems value="#{actividadesMovilController.lstAgencias}" var="age" itemValue="#{age.agenciaid}" itemLabel="#{age.agencia}"/>  
                                            
                                        </p:selectOneMenu>
                                        
                                        <p:tooltip rendered ="#{actividadesMovilController.lstAgencias.size()>=8?true:false}" for="agencia2" value="No se recomienda seleccionar TODAS(se tarda) " position="top"/>
                                        
                                        <p:selectOneMenu id="asesor2" value="#{actividadesMovilController.filtroAsesor2}" style="width:200px">
                                            <f:selectItems value="#{actividadesMovilController.lstAsesores2}" var="ase" itemValue="#{ase.usuariotopaz}" itemLabel="#{ase.nombre}"/>  

                                        </p:selectOneMenu>

                                        <p:panelGrid columns="2"  >
                                            <p:outputLabel value="Sin visita desde:"   />    
                                            <p:calendar id="txtfechaT2" locale="es" placeholder="Desde" pattern="dd-MM-yyyy" showOn="button" size="10" value="#{actividadesMovilController.filtroFecha_t2}"/>

                                        </p:panelGrid>


                                        <h:commandLink title="Exportar a Excel" style="border-color: #000000">
                                            <p:graphicImage name="images/export/excel.png" width="24"/>
                                            <p:dataExporter type="xls" target="tabla2"   fileName="ClientesSinVisitas" />
                                        </h:commandLink>

                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-refresh" value="CONSULTAR"  actionListener="#{actividadesMovilController.listarSinVisitar()}" style="color:white;background:#3b63a9;font-weight:bold" update="tabla2,paneltot" />




                                    </h:panelGrid>



                                    <p:panel header="Prestamos" style="min-width: 1100px;margin-left: -20px;margin-right: -20px;height: 100%;">
                                        <h:panelGrid columns="1"  >
                                            <p:dataTable id="tabla2"  emptyMessage="No hay datos" scrollable="true" scrollHeight="400" style="font-size:9px;min-width: 1100px;margin-left: -10px;margin-right: -10px;height: auto !important;" value="#{actividadesMovilController.lstSinActividades}" var="sin" >

                                                <p:column headerText="NOMBRE_ASESOR" style="width:40px;background-color: #{sin.colorBack_T};">
                                                    <p:outputLabel value="#{sin.nomAsesor}" />
                                                </p:column>
                                                <p:column headerText="NOMBRE_CLIENTE" style="width:55px;background-color: #{sin.colorBack_T};">
                                                    <p:outputLabel value="#{sin.nombre}" />
                                                </p:column>
                                                 <p:column  headerText="TELEFONO" width="0" styleClass="vd-hidden-column">
                                                     <p:outputLabel value="#{sin.objetoDir.telefonomovil}" />
                                                </p:column>
                                                <p:column headerText="CAPITAL" style="width:20px;background-color: #{sin.colorBack_T};" sortBy="#{sin.capital}">
                                                    <p:outputLabel value="#{sin.capital}" ><f:convertNumber type="currency" currencySymbol="L" /></p:outputLabel>
                                                </p:column>
                                                <p:column headerText="DIAS ATRASO" style="width:20px;background-color: #{sin.colorBack_T};" sortBy="#{sin.diasAtraso}">
                                                    <p:outputLabel value="#{sin.diasAtraso}" />
                                                </p:column>
                                                <p:column headerText="SALDO ATRASADO" style="width:20px;background-color: #{sin.colorBack_T};" sortBy="#{sin.cuotaAtrasada}">
                                                    <p:outputLabel value="#{sin.cuotaAtrasada}" ><f:convertNumber type="currency" currencySymbol="L" /></p:outputLabel>
                                                </p:column>
                                                <p:column headerText="N.PRESTAMO" style="width:14px;background-color: #{sin.colorBack_T};">
                                                    <p:outputLabel value="#{sin.prestamo}" />
                                                </p:column>
                                                <p:column headerText="ULTIMO_CONCTACTO" style="width:25px;background-color: #{sin.colorBack_T};" sortBy="#{sin.fechaUltimaVisita}">
                                                    <p:outputLabel value="#{sin.fechaUltimaVisita}" >
                                                         <f:convertDateTime timeZone="GMT-6" pattern="dd/MM/yyyy h:mm a"/>
                                                    </p:outputLabel>
                                                </p:column>
                                                <p:column headerText="PDF" style="width:1px;;" exportable="false">
                                                    <center>
                                                        <h:commandLink rendered="#{sin.diasAtraso>0?true:false}"  id="reporte" value="NotaCobro" target="_black" actionListener="#{actividadesMovilController.verDocumentoPDF(sin.prestamo,sin)}" />
                                                        <!--<p:commandButton styleClass="buttonOverRed" icon="fa fa-eye" style="color:black;background:gold;font-weight:bold"  immediate="true" />-->
                                                    </center>
                                                </p:column>
                                                <p:column  headerText="DEPARTAMENTO" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{sin.objetoDir.departamento}" />
                                                </p:column>
                                                <p:column  headerText="MUNICIPIO" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{sin.objetoDir.municipio}" />
                                                </p:column>
                                                <p:column  headerText="SECTOR" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{sin.objetoDir.sector}" />
                                                </p:column>
                                                <p:column  headerText="BARRIO" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{sin.objetoDir.barrio}" />
                                                </p:column>
                                                <p:column  headerText="AGENCIA" width="0" styleClass="vd-hidden-column">
                                                    <p:outputLabel value="#{sin.nomAgencia}" />
                                                </p:column>


                                            </p:dataTable>
                                        </h:panelGrid>
                                    </p:panel> 

                                </h:panelGrid>
                                <h:panelGrid id="paneltot" columns="10" style="margin-top:-5px;margin-bottom:0px" cellpadding="5"> 
                                    <p:outputLabel style="margin-left:20px" value="Resultados:"/>
                                    <p:inputNumber readonly="true" inputStyle="margin-left:-10px;width:50px;color:gold;background:black;" decimalPlaces="0"  value="#{actividadesMovilController.lstSinActividades.size()}" /> 
                                </h:panelGrid>

                            </p:tab>
                            
                        </p:tabView>
                    </center>
                </h:form>

                <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
                    <center>
                        <p:commandButton value="Si" styleClass="ui-confirmdialog-yes"  />
                        <p:commandButton value="No" styleClass="ui-confirmdialog-no"  />
                    </center>
                </p:confirmDialog> 





                <!-- Venta Dialogos -->


                <p:dialog  header=" #DETALLES" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlActividades" id="dlgActividades" showEffect="fold" hideEffect="explode" resizable="false" >
                    <h:form id="formUs">  

                        <h:panelGrid id="contenDlg" columns="1">
                            <center>
                                <h:panelGrid columns="4">
                                    <p:outputLabel   value="ASESOR"></p:outputLabel>
                                    <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.nomasesor}" style="width:360px"/>
                                    <p:outputLabel   value="USUARIO_TOPAZ"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{actividadesMovilController.objeto.usragenda}" style="width:200px"/>

                                </h:panelGrid>
                                <h:panelGrid columns="4">
                                    <p:outputLabel   value="AGENCIA"></p:outputLabel>
                                    <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.nomagencia}" style="width:355px"/>
                                    <p:outputLabel   value="NUM. PRESTAMO"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{actividadesMovilController.objeto.prestamo}" style="width:200px"/>

                                </h:panelGrid>

                                <h:panelGrid columns="4">
                                    <p:outputLabel   value="CLIENTE"></p:outputLabel>
                                    <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.nombre!=null?actividadesMovilController.objeto.nombre:actividadesMovilController.objeto.nombrenuevo.toUpperCase()}" style="width:360px"/>
                                    <p:outputLabel   value="V DESEMBOLSO "></p:outputLabel>
                                    <p:inputNumber readonly="true" value="#{actividadesMovilController.objeto.montodesembolsado}"  size="20" />


                                </h:panelGrid>
                                <h:panelGrid columns="7" >
                                    <p:outputLabel   value="CAPITAL"></p:outputLabel>
                                    <p:inputNumber readonly="true" value="#{actividadesMovilController.objeto.saldocapital}"  size="10" />
                                    <p:outputLabel   value="#{actividadesMovilController.objeto.porpagado}"></p:outputLabel>


                                    <p:outputLabel   value="F.PAGO "></p:outputLabel>
                                    <p:inputText readonly="true"  value="#{actividadesMovilController.objeto.formapago}" style="width:100px"/>

                                    <p:outputLabel   value="DIAS.ATR"></p:outputLabel>
                                    <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.diasatraso}" style="width:110px"/>


                                </h:panelGrid>
                                <h:panelGrid columns="9" >

                                    <p:outputLabel   value="CUOTAS P."></p:outputLabel>
                                    <p:inputText  id="cuptasp" readonly="true" value="#{actividadesMovilController.objeto.ncuotas}" style="width:50px">
                                        <p:tooltip for="cuptasp" value="Total: #{actividadesMovilController.objeto.ncuotas+actividadesMovilController.objeto.cuotasres } " position="bottom"/>
                                    </p:inputText>

                                    <p:outputLabel   value="CUOTAS R."></p:outputLabel>
                                    <p:inputText  id="cuptasr" readonly="true" value="#{actividadesMovilController.objeto.cuotasres}" style="width:50px">
                                        <p:tooltip for="cuptasr" value="Total: #{actividadesMovilController.objeto.ncuotas+actividadesMovilController.objeto.cuotasres } " position="bottom"/>
                                    </p:inputText>

                                    <p:outputLabel   value="C.VIGENTE"></p:outputLabel>
                                    <p:inputNumber readonly="true" value="#{actividadesMovilController.objeto.valorcuotavig}"  size="8" />

                                    <p:outputLabel   value="C.ATRASADA"></p:outputLabel>
                                    <p:inputNumber readonly="true" value="#{actividadesMovilController.objeto.saldoatrasado}"  size="8" />
                                    
                                    <h:commandLink id="reporte2" rendered="#{actividadesMovilController.objeto.fechacompleto==null?false:true}" style="color: maroon; font-weight: bold" value=" VER EN PDF" target="_black" actionListener="#{actividadesMovilController.verDocumentoPDF(actividadesMovilController.objeto.liteuidvisita ,null)}" />

                                </h:panelGrid>
                                <p:panel header="Visita"  style="font-size:12px">

                                    <h:panelGrid columns="4"  >
                                        <p:outputLabel   value="PROGRAMADA PARA:"></p:outputLabel>
                                        <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.fechaHoraProVisita}" style="width:220px"/>

                                        <p:outputLabel   value="FECHA COMPLETO:"></p:outputLabel>
                                        <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.fechacompleto}" style="width:220px">
                                            <f:convertDateTime timeZone="GMT-6" pattern="dd/MM/yyyy hh:mm a"/>
                                        </p:inputText>

                                    
                                        <p:outputLabel   value="TIPO VISITA"></p:outputLabel>
                                        <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.tipovisita}" style="width:220px"/>

                                        <p:outputLabel   value="RESULTADO VISITA"></p:outputLabel>
                                        <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.resultadovisita}" style="width:220px"/>
                                        
                                        <p:outputLabel   value="FECHA ULTIMO PAGO"></p:outputLabel>
                                        <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.fechaultimopago}" style="width:220px">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </p:inputText>

                                        <p:outputLabel   value="FECHA COMPROMISO"></p:outputLabel>
                                        <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.VFechacompromiso}" style="width:220px">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </p:inputText>
                                        
                                    </h:panelGrid>
                                    <h:panelGrid columns="2"  >
                                        <p:outputLabel   value="COMENTARIO"></p:outputLabel>
                                        <p:inputText  readonly="true" value="#{actividadesMovilController.objeto.comentario}" style="width:600px"/>
                                    </h:panelGrid>


                                    <h:panelGrid columns="1"  >
                                        <p:outputLabel style="font-weight: bold"  value="TELFONOS CLIENTE:#{actividadesMovilController.objeto.telefonomovil}, #{actividadesMovilController.objeto.telefonofijo}         "></p:outputLabel>
                                        <p:outputLabel   value="Lugar:#{actividadesMovilController.objeto.departamento}, #{actividadesMovilController.objeto.municipio}, #{actividadesMovilController.objeto.sector}, #{actividadesMovilController.objeto.barrio}"></p:outputLabel>
                                        <p:outputLabel   value="REFERENCIA:"></p:outputLabel>
                                        <h:panelGrid columns="2"  >
                                            <p:outputLabel   value="#{actividadesMovilController.objeto.referenciadir}"></p:outputLabel> 
                                            <p:commandButton  rendered="#{actividadesMovilController.objeto.latvisita.equals('0')?false: (actividadesMovilController.validaEsSupervisaAsesor()?true:false) }" styleClass="buttonOverRed" style="color:black;background:yellow ;font-weight:bold" icon="fa fa-map-marker"  oncomplete="PF('wdlUbicacion').show();" actionListener="#{actividadesMovilController.objeto.iniMap()}"  immediate="true" update="dlgUbicacion,msj" />
                                        </h:panelGrid>



                                    </h:panelGrid>

                                </p:panel>
                                <h:panelGrid columns="2"  >
                                    <p:outputLabel   value="Registro creado el:"/>
                                    <p:outputLabel   value="#{actividadesMovilController.objeto.fecharegistro}">
                                        <f:convertDateTime timeZone="GMT-6" pattern="dd/MM/yyyy hh:mm a"/>
                                    </p:outputLabel>
                                </h:panelGrid>
                                
                                
                                

                            </center>


                            <h:panelGrid   columns="6">



                            </h:panelGrid>





                        </h:panelGrid>

                        <center>
                            <h:panelGrid   columns="4" cellpadding="5">




                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-backward"  oncomplete="PF('wdlActividades').hide();"  value="SALIR" immediate="true" />
                            </h:panelGrid>
                        </center>


                    </h:form>
                </p:dialog>


                <!-- Dialogo Fechas -->


                <p:dialog  header="FILTROS DE FECHA" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlFechas" id="dlgFechas" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formFec">  
                        <p:fieldset legend="Visitas Programadas para:" style="margin-bottom:20px">
                            <h:panelGrid columns="2" cellpadding="5">
                                <p:calendar id="txtfechaR1" locale="es" placeholder="Desde" pattern="dd-MM-yyyy" showOn="button" size="10" value="#{actividadesMovilController.filtroFechaR1}"/>
                                <p:calendar id="txtfechaR2" locale="es" placeholder="Hasta" pattern="dd-MM-yyyy" showOn="button" size="10" value="#{actividadesMovilController.filtroFechaR2}"/>
                            </h:panelGrid>
                        </p:fieldset>
                        
                        <p:fieldset legend="Visitas Completadas el:" style="margin-bottom:20px">
                            <h:panelGrid columns="2" cellpadding="5">
                                <p:calendar id="txtfechaC1" locale="es" placeholder="Desde" pattern="dd-MM-yyyy" showOn="button" size="10" value="#{actividadesMovilController.filtroFechaC1}"/>
                                <p:calendar id="txtfechaC2" locale="es" placeholder="Hasta" pattern="dd-MM-yyyy" showOn="button" size="10" value="#{actividadesMovilController.filtroFechaC2}"/>
                            </h:panelGrid>
                        </p:fieldset>

                        <center>
                            <h:panelGrid   columns="1" cellpadding="5">
                                <p:commandButton  styleClass="buttonOverRed" style="color:black;background:gold;font-weight:bold " icon="fa fa-check-circle" value="Establecer" oncomplete="PF('wdlFechas').hide();" update=":msj :form" />
                            </h:panelGrid>
                        </center>
                    </h:form>
                </p:dialog>



                <!-- Dialogo MAPA -->


                <p:dialog  header="Ubicacion" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlUbicacion" id="dlgUbicacion" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formUbica">  

                        <!--Honduras 14.4041703,-86.7056069  -->
                        <p:gmap center="#{actividadesMovilController.objeto.latvisita},#{actividadesMovilController.objeto.lonvisita}" zoom="15" type="MAP" model="#{actividadesMovilController.objeto.simpleModel}"  style="width:850px;height:550px" >

                        </p:gmap> 



                    </h:form>
                </p:dialog>
                
                <!-- Dialogo MAPA 2 -->


                <p:dialog  header="Ubicaciones Visitas" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlUbicacion2" id="dlgUbicacion2" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formUbica2">  
                        <p:outputLabel style="font-weight: bold"  value="Ubicaciones de Visitas - (maximo 30)"></p:outputLabel>
                        <!--Honduras 14.4041703,-86.7056069  -->
                        <p:gmap center="#{actividadesMovilController.latIni},#{actividadesMovilController.lonIni}" zoom="#{actividadesMovilController.zoom}" type="MAP" model="#{actividadesMovilController.simpleModel}"  style="width:850px;height:550px" >
                            <p:ajax event="overlaySelect" listener="#{actividadesMovilController.onMarkerSelect}" update="msj"/>
                        </p:gmap> 



                    </h:form>
                </p:dialog>




                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
                <p:dialog modal="true" appendTo="@(body)" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false" showHeader="false">
                    <p:graphicImage name="#{actividadesMovilController.imgLoadin}" />
                </p:dialog>

            </ui:define>
        </ui:composition>
    </h:body>
</html>

