<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>

    </h:head>
    <h:body>



        <ui:composition template="/welcomePrimefaces.xhtml">
            <ui:define name="bodyJR">
                <script type="text/javascript">
                    //<![CDATA[
                    function start() {
                        PF('statusDialog').show();
                    }

                    function stop() {
                        PF('statusDialog').hide();
                    }
                    //]]>
                </script>  
                <p:growl id="msj" showDetail="true"/>

                <h:form id="form">



                    <!--
                    <p:graphicImage  cache="false" value="#{admUsuariosController.mostrarImagen('logofinsolpng.png')}"/>
                    -->
                    <p:commandButton styleClass="buttonOverRed" icon="fa fa-plus" style="margin-left:20px;color:white;background:#3b63a9;font-weight:bold" value="NUEVO REQUERIMIENTO" actionListener="#{admUsuariosController.nuevo()}"  oncomplete="PF('wdlRequerimiento').show();" update="dlgRequerimiento"/>
                    <p:commandButton styleClass="buttonOverRed" icon="fa fa-plus" style="color:white;background:#3b63a9;font-weight:bold" actionListener="#{admUsuariosController.nuevo()}" value="NUEVO CASO AYUDA" oncomplete="PF('wdlCaso').show();" update="dlgCaso"/>

                    <center>

                        <p:tabView style="font-size:14px;" dynamic="true" cache="true" activeIndex="0">
                            <p:tab title="PANEL DE USUARIOS INTERNOS"  >
                                <f:facet name="actions" >
                                    <p:commandButton value="?" styleClass="buttonOverRed"  style="margin-left:20px;color:white;background:#3b63a9;font-weight:bold"/>
                                      
                                </f:facet>
                                
                                <h:panelGrid columns="2" >
                                    <p:panel header="Mis Requerimientos"  footer="Requerimientos Enviados" style="min-width: 500px">
                                        <h:panelGrid columns="1"  >
                                            <p:dataTable id="tabla1"  emptyMessage="No hay datos" scrollable="true" scrollHeight="177"  style="font-size:10px;min-width: 500px" value="#{admUsuariosController.lstReq}" var="req" >

                                                <p:column headerText="ID" style="width:10px;background-color: #{req.colorBack_R};">
                                                    <p:outputLabel value="#{req.id}" />
                                                </p:column>
                                                <p:column headerText="NOMBRE REQUERIMIENTO" style="width:70px;background-color: #{req.colorBack_R};">
                                                    <p:outputLabel value="#{req.nombre_corto}" />
                                                </p:column>
                                                <p:column headerText="ESTADO" style="width:20px;background-color: #{req.colorBack_R};">
                                                    <p:outputLabel value="#{req.estado}" />
                                                </p:column>
                                                <p:column headerText="VER" style="width:20px;background-color: #{req.colorBack_R};">
                                                    <center>
                                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-eye" style="color:black;background:gold;font-weight:bold"  immediate="true" actionListener="#{admUsuariosController.modificar(req)}"  oncomplete="PF('wdlRequerimiento').show();" update="dlgRequerimiento"   />
                                                    </center>
                                                </p:column>
                                            </p:dataTable>
                                        </h:panelGrid>
                                    </p:panel> 
                                    <p:panel header="Mis Casos de Ayuda" footer="Casos Eviados" style="min-width: 500px">
                                        <h:panelGrid columns="1" >
                                            <p:dataTable id="tabla2" emptyMessage="No hay datos" scrollable="true" scrollHeight="177"  style="font-size:10px;min-width: 500px" value="#{admUsuariosController.lstCasos}"  var="cas" >
                                                <p:column headerText="ID" style="width:10px;background-color: #{req.colorBack_R};">
                                                    <p:outputLabel value="#{cas.id}" />
                                                </p:column>
                                                <p:column headerText="NOMBRE CASO" style="width:70px;background-color: #{req.colorBack_R};">
                                                    <p:outputLabel value="#{cas.nombre_corto}" />
                                                </p:column>
                                                <p:column headerText="ESTADO" style="width:20px;background-color: #{req.colorBack_R};">
                                                    <p:outputLabel value="#{cas.estado}" />
                                                </p:column>
                                                <p:column headerText="VER" style="width:20px;background-color: #{req.colorBack_R};">
                                                    <center>
                                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-eye" style="color:black;background:gold;font-weight:bold"  immediate="true" actionListener="#{admUsuariosController.modificar(cas)}"  oncomplete="PF('wdlCaso').show();" update="dlgCaso"   />
                                                    </center>
                                                </p:column>
                                            </p:dataTable>
                                        </h:panelGrid>
                                    </p:panel> 

                                    <p:panel header="Aprobaciones Pendientes" footer="Solicitudes de aprobar(casos)" style="min-width: 500px">
                                        <h:panelGrid columns="1" >
                                            <p:dataTable id="tabla3" 
                                                         value="#{admUsuariosController.lstAprobarPend}" 
                                                         emptyMessage="No hay datos" 
                                                         scrollable="true" 
                                                         scrollHeight="177"  
                                                         style="font-size:10px;min-width: 500px" 
                                                         var="apr" >
                                                <p:column headerText="ID|ID_REQ" style="width:10px;background-color: #{apr.colorBack_T};">
                                                    <p:outputLabel value="#{apr.id}|#{apr.id_req_padre}" />
                                                </p:column>
                                                <p:column headerText="NOMBRE CASO" style="width:70px;background-color: #{apr.colorBack_T};">
                                                    <p:outputLabel value="#{ (apr.tipo_registro.equals('A')?apr.objetoTarea:apr.nombre_corto ) }" >
                                                    </p:outputLabel>
                                                </p:column>
                                                <p:column headerText="ESTADO" style="width:30px;background-color: #{apr.colorBack_T};">
                                                    <p:outputLabel value="#{apr.estado}" />
                                                </p:column>
                                                <p:column headerText="VER" style="width:10px;background-color: #{apr.colorBack_T};">
                                                    <center>
                                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-eye" style="color:black;background:gold;font-weight:bold"  immediate="true" actionListener="#{admUsuariosController.ver_ayuda_enviada(apr)}"   update="dlgEjecutaSQL dlgPermiso dlgRequerimiento dlgCargaProce"   />
                                                    </center>
                                                </p:column>
                                            </p:dataTable>
                                        </h:panelGrid>
                                    </p:panel> 

                                    <p:panel header="Aceptacion/Finalizacion" footer="Casos y Requerimientos para aceptar" style="min-width: 500px">
                                        <h:panelGrid columns="1" >
                                            <p:dataTable id="tabla4" value="#{admUsuariosController.lstAceptarPend}" emptyMessage="No hay datos" scrollable="true" scrollHeight="177"  style="font-size:10px;min-width: 500px" var="ace" >
                                                <p:column headerText="ID_REQ" style="width:10px;background-color: #{ace.colorBack_R};">
                                                    <p:outputLabel value="#{ace.id_req_padre}" />
                                                </p:column>
                                                <p:column headerText="NOMBRE CASO" style="width:70px;background-color: #{ace.colorBack_R};">
                                                    <p:outputLabel value="#{ace.nombre}" />
                                                </p:column>
                                                <p:column headerText="ESTADO" style="width:30px;background-color: #{ace.colorBack_R};">
                                                    <p:outputLabel value="#{ace.estado}" />
                                                </p:column>
                                                <p:column headerText="VER" style="width:10px;background-color: #{ace.colorBack_R};">
                                                    <center>
                                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-eye" style="color:black;background:gold;font-weight:bold"  immediate="true" actionListener="#{admUsuariosController.ver_completado(ace)}"   update="dlgCompletado"   />
                                                    </center>
                                                </p:column>
                                            </p:dataTable>
                                        </h:panelGrid>
                                    </p:panel> 


                                </h:panelGrid>

                            </p:tab>

                        </p:tabView>
                    </center>
                </h:form>

                <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
                    <center>
                        <p:commandButton value="Si" styleClass="ui-confirmdialog-yes"  />
                        <p:commandButton value="No" styleClass="ui-confirmdialog-no"  />
                    </center>
                </p:confirmDialog> 





                <!-- Venta Dialogos -->


                <p:dialog  header="INGRESAR REQUERIMIENTO ##{admUsuariosController.objeto.id}" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlRequerimiento" id="dlgRequerimiento" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formReq">  

                        <h:panelGrid columns="1">
                            <center>
                                <h:panelGrid columns="6">
                                    <p:outputLabel   value="USUARIO SOLICITA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objeto.d_usuario}" style="width:230px"  />
                                    <p:outputLabel   value="FECHA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objeto.fecha}" style="width:90px"/>
                                    <p:outputLabel   value="CIRCULAR"></p:outputLabel>
                                    <p:inputText  value="#{admUsuariosController.objeto.circular}" style="width:100px"/>
                                </h:panelGrid>
                            </center>

                            <h:panelGrid   columns="3" cellpadding="5">
                                <p:fieldset legend="Prioridad" style="margin-bottom:5px">
                                    <p:selectOneRadio id="prioridad" required="true" requiredMessage="Seleccione Prioridad" value="#{admUsuariosController.objeto.prioridad}" >
                                        <f:selectItem itemLabel="Baja" itemValue="Baja" />
                                        <f:selectItem itemLabel="Media" itemValue="Media" />
                                        <f:selectItem itemLabel="Alta" itemValue="Alta" />
                                    </p:selectOneRadio>

                                </p:fieldset>
                                <p:fieldset legend="Tipo" style="margin-bottom:5px">
                                    <p:selectOneRadio id="tipo" required="true" requiredMessage="Seleccione Tipo" value="#{admUsuariosController.objeto.nuevo}" >
                                        <f:selectItem itemLabel="Nuevo" itemValue="S" />
                                        <f:selectItem itemLabel="Modificacion" itemValue="M" />
                                        
                                    </p:selectOneRadio>

                                </p:fieldset>

                                <p:fieldset legend="Adjuntar (#{admUsuariosController.objeto.lstDocument.size()})" style="margin-bottom:5px">
                                    <p:commandButton styleClass="buttonOverRed" style="color:white;background:#3b63a9;font-weight:bold" icon="fa fa-check-circle"  value="Documentos" oncomplete="PF('wdlAdjunto').show();" update="dlgAdjunto"/>
                                </p:fieldset>


                            </h:panelGrid>
                            <h:panelGrid   columns="2">
                                <p:outputLabel   value="NOMBRE REQUERIMIENTO:"></p:outputLabel>
                                <p:inputText  value="#{admUsuariosController.objeto.nombre_corto}" required="true" requiredMessage="Ingrese el nombre del requerimiento" />

                            </h:panelGrid>
                            <p:outputLabel style="font-weight:bold"  value="BREVE DESCRIPCION DEL REQUERIMIENTO:"></p:outputLabel>
                            <p:inputTextarea  rows="8" cols="60" value="#{admUsuariosController.objeto.descripcion}" autoResize="false" required="true" requiredMessage="Ingrese Descripcion del Requerimiento" style="width:700px;height: 200px"/>






                        </h:panelGrid>

                        <center>
                            <h:panelGrid   columns="4" cellpadding="5">
                                
                                <p:commandButton styleClass="buttonOverRed" disabled="#{admUsuariosController.disable_bt_autorizar_2()}" style="color:black;background:greenyellow;font-weight:bold" icon="fa fa-check-circle" actionListener="#{admUsuariosController.autorizacionREQ('Sin Autorizar TI')}" update="msj form"  value="AUTORIZAR" immediate="true"  >
                                    <p:confirm header="Confirmacion" message="¿Desea Autorizar Requerimiento ##{admUsuariosController.objeto.id} ?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton styleClass="buttonOverBlack" disabled="#{admUsuariosController.disable_bt_autorizar_2()}" style="color:white;background:red ;font-weight:bold"  icon="fa fa-remove"  actionListener="#{admUsuariosController.autorizacionREQ('Rechazado')}"  update="msj form" value="RECHAZAR" immediate="true" >
                                    <p:confirm header="Confirmacion" message="¿Desea Rechazar Requerimiento ##{admUsuariosController.objeto.id} ?" icon="ui-icon-alert" />
                                </p:commandButton>
                                
                                <p:commandButton styleClass="buttonOverRed" style="color:white;background:#3b63a9;font-weight:bold" icon="fa fa-check-circle" actionListener="#{admUsuariosController.insertarRequerimiento()}" update="msj form"  value="GUARDAR"  />
                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-backward"  oncomplete="PF('wdlRequerimiento').hide();"  value="SALIR" immediate="true" />
                            </h:panelGrid>
                        </center>


                    </h:form>
                </p:dialog>





                <!-- OTRO DIALOGO -->
                <p:dialog  header="INGRESAR CASO ##{admUsuariosController.objeto.id}" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlCaso" id="dlgCaso" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formCaso">  

                        <h:panelGrid columns="1">
                            <center>
                                <h:panelGrid columns="6">
                                    <p:outputLabel   value="USUARIO SOLICITA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objeto.d_usuario}" style="width:230px"  />
                                    <p:outputLabel   value="FECHA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objeto.fecha}" style="width:90px"/>
                                    <p:outputLabel   value="AGENCIA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objeto.d_agencia}" style="width:100px"/>
                                </h:panelGrid>
                            </center>

                            <h:panelGrid   columns="2" cellpadding="5">
                                <p:fieldset legend="Aplicativo Con Problemas:" >
                                    <p:selectManyCheckbox  id="aplicativo" value="#{admUsuariosController.objeto.aplicativo}" required="true" requiredMessage="Seleccione el Aplicativo con Problemas"  layout="grid" columns="3">
                                        <f:selectItem itemLabel="Clientes" itemValue="Clientes_AP" />
                                        <f:selectItem itemLabel="Solicitudes" itemValue="Solicitudes_AP" />
                                        <f:selectItem itemLabel="Prestamos" itemValue="Prestamos_AP" />
                                        <f:selectItem itemLabel="Garantias" itemValue="Garantias_AP" />
                                        <f:selectItem itemLabel="Cuentas Ahorro" itemValue="Cuentas_Ahorro_AP" />
                                        <f:selectItem itemLabel="Deposito Plazo" itemValue="Deposito_Plazo_AP" />
                                        <f:selectItem itemLabel="Venta Seguros" itemValue="Venta_Seguros_AP" />
                                        <f:selectItem itemLabel="Caja" itemValue="Caja_AP" />
                                        <f:selectItem itemLabel="Contabilidad" itemValue="Contabilidad_AP" />
                                        <f:selectItem itemLabel="Otros" itemValue="Otros_AP" >

                                        </f:selectItem>

                                    </p:selectManyCheckbox>
                                    <p:inputText placeholder="Especifique otros.." value="#{admUsuariosController.objeto.especifique_otro}" style="width:450px"/>
                                </p:fieldset>

                                <p:fieldset legend="Adjuntar (#{admUsuariosController.objeto.lstDocument.size()})" style="margin-bottom:5px">
                                    <p:commandButton styleClass="buttonOverRed" style="color:white;background:#3b63a9;font-weight:bold" icon="fa fa-check-circle"  value="Documentos" oncomplete="PF('wdlAdjunto').show();" update="dlgAdjunto"/>
                                </p:fieldset>

                            </h:panelGrid>
                            <h:panelGrid   columns="2">
                                <p:outputLabel   value="NOMBRE DEL CASO:"></p:outputLabel>
                                <p:inputText  value="#{admUsuariosController.objeto.nombre_corto}" required="true" requiredMessage="Ingrese el Nombre del Caso" />
                            </h:panelGrid>
                            <p:outputLabel style="font-weight:bold"  value="BREVE DESCRIPCION DEL PROBLEMA:"></p:outputLabel>
                            <p:inputTextarea  rows="8" cols="60" value="#{admUsuariosController.objeto.descripcion}" autoResize="false" required="true" requiredMessage="Ingrese la Descripcion del Problema" style="width:700px;height: 200px"/>






                        </h:panelGrid>

                        <center>
                            <h:panelGrid   columns="4" cellpadding="5">
                                <p:commandButton styleClass="buttonOverRed" style="color:white;background:#3b63a9;font-weight:bold" icon="fa fa-check-circle"  value="GUARDAR" actionListener="#{admUsuariosController.insertarCaso()}" update="msj form" />
                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-backward"  oncomplete="PF('wdlCaso').hide();"  value="SALIR" immediate="true" />
                            </h:panelGrid>
                        </center>


                    </h:form>
                </p:dialog>



                <!-- Archivos Adjuntos-->
                <p:dialog  header="Adjuntos"  style="font-size:14px;background:#DEDDDD;" widgetVar="wdlAdjunto" id="dlgAdjunto" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formAdjunto" enctype="multipart/form-data">  

                        <p:panelGrid   columns="2" >
                            <p:panelGrid   columns="1" >
                                <h4>Lista de archivos Agregados</h4>
                                <p:dataTable id="tablaA" emptyMessage="No hay documentos" scrollable="true" scrollHeight="177"  style="width: 400px;height: 200px; font-size:12px;;font-weight:bold" value="#{admUsuariosController.objeto.lstDocument}" var="do" >

                                    <p:column headerText="Documento" style="width:80px; background-color: #{do.color}">
                                        <p:outputLabel value="#{do.nombre}" />
                                    </p:column>

                                    <p:column headerText="Ver/Eliminar" style="width:20px; background-color: #{do.color}">
                                        <center>
                                            <p:commandButton styleClass="buttonOverRed" id="downloadLink" rendered="#{do.estado==1?true:false}" icon="fa fa-arrow-circle-down"  ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" actionListener="#{admUsuariosController.objeto.prepDownload(do)}">
                                                <p:fileDownload value="#{admUsuariosController.objeto.download}" />
                                            </p:commandButton>
                                            <p:outputLabel value="Se Eliminara al guardar" rendered="#{do.estado==0?true:false}"/>

                                            <p:commandButton icon="fa fa-close" rendered="#{do.estado==1?true:false}" styleClass="buttonOverBlack" style="color:white;background:red;font-weight:bold"  immediate="true" actionListener="#{admUsuariosController.objeto.quitarDoc(do)}" update="tablaA" />
                                        </center>
                                    </p:column>
                                </p:dataTable>

                            </p:panelGrid>

                            <p:panelGrid   columns="1" >
                                <h4>Arrastre o Seleccione Archivos Para el Requerimiento</h4>
                                <p:fileUpload messageTemplate="Hola Mundo" label="Seleccionar" cancelLabel="Cancelar" uploadLabel="Subir" fileUploadListener="#{admUsuariosController.objeto.handleFileUpload}" style="width: 600px;font-size:15px;" multiple="true" mode="advanced" dragDropSupport="true"
                                              update="msj formAdjunto"   >
                                    <p:panelGrid   columns="1" >
                                        <p:outputLabel value="Arrastre Aqui sus Archivos"/>

                                    </p:panelGrid>

                                </p:fileUpload>

                            </p:panelGrid>







                        </p:panelGrid>


                        <center>
                            <h:panelGrid   columns="1" cellpadding="5">

                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-backward"  oncomplete="PF('wdlAdjunto').hide();"  value="CERRAR" immediate="true" />
                            </h:panelGrid>
                        </center>


                    </h:form>
                </p:dialog>


                <!-- DIALOGO EJEUCTAR SQL-->
                <p:dialog header="AYUDA A EJECUTAR SCRIPT ##{admUsuariosController.objetoSecundario.id}" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlEjecutaSQL" id="dlgEjecutaSQL" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formEjecuta">  

                        <h:panelGrid columns="1">
                            <center>
                                <h:panelGrid columns="6">
                                    <p:outputLabel   value="USUARIO SOLICITA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objetoSecundario.d_usuario}" style="width:230px"  />
                                    <p:outputLabel   value="FECHA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objetoSecundario.fecha}" style="width:90px"/>

                                </h:panelGrid>
                            </center>

                            <h:panelGrid   columns="2" cellpadding="5">
                                <p:fieldset legend="Tipo de Comando:" >
                                    <p:selectManyCheckbox  id="tipoComando" required="true" requiredMessage="Seleccione tipo de comando" value="#{admUsuariosController.objetoSecundario.tipo_comando}"  layout="grid" columns="3">
                                        <f:selectItem itemLabel="Update" itemValue="Update_TPC" />
                                        <f:selectItem itemLabel="Delete" itemValue="Delete_TPC" />
                                        <f:selectItem itemLabel="Insert" itemValue="Insert_TPC" />
                                    </p:selectManyCheckbox>
                                </p:fieldset>
                                <p:fieldset legend="Ambiente Base de Datos:" >
                                    <p:selectOneRadio  id="ambiente" required="true" requiredMessage="Seleccione Ambiente" value="#{admUsuariosController.objetoSecundario.ambiente}"  layout="grid" columns="3">
                                        <f:selectItem itemLabel="Produccion" itemValue="Produccion_TPA" />
                                        <f:selectItem itemLabel="Mes Anterior" itemValue="Mes_Anterior_TPA" />
                                        <f:selectItem itemLabel="Testing" itemValue="Testing_TPA" />
                                    </p:selectOneRadio>
                                </p:fieldset>


                            </h:panelGrid>
                            <h:panelGrid   columns="3">
                                <p:outputLabel   value="Cantidad de Registros Afectados:"></p:outputLabel>
                                <p:inputNumber decimalPlaces="0" required="true" requiredMessage="Ingrese la cantidad de Registros Afectados" value="#{admUsuariosController.objetoSecundario.cant_reg_afec}"   />

                            </h:panelGrid>
                            <p:commandButton styleClass="buttonOverRed" rendered="#{admUsuariosController.operacion.equalsIgnoreCase('U')?true:false}" style="color:black;background:gold;font-weight:bold" icon="fa fa-dedent"  value="Ver Requerimiento de Origen y la Documentacion" actionListener="#{admUsuariosController.ver_ayuda_Origen()}" update="dlgRequerimiento dlgCaso"/>
                            <p:outputLabel style="font-weight:bold"  value="DESCRIPCION DE LO SOLICITADO:"></p:outputLabel>
                            <p:inputTextarea required="true" requiredMessage="Ingrese la descripcion" rows="8" cols="60" value="#{admUsuariosController.objetoSecundario.descripcion}" autoResize="false" style="width:700px;height: 200px"/>






                        </h:panelGrid>

                        <center>
                            <h:panelGrid   columns="4" cellpadding="5">

                                <p:commandButton styleClass="buttonOverRed" disabled="#{admUsuariosController.disable_bt_autorizar()}" style="color:black;background:greenyellow;font-weight:bold" icon="fa fa-check-circle" actionListener="#{admUsuariosController.autorizacion('Sin Autorizar TI')}" update="msj form"  value="AUTORIZAR" immediate="true"  >
                                    <p:confirm header="Confirmacion" message="¿Desea Autorizar Requerimiento ##{admUsuariosController.objetoSecundario.id} ?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton styleClass="buttonOverBlack" disabled="#{admUsuariosController.disable_bt_autorizar()}" style="color:white;background:red ;font-weight:bold"  icon="fa fa-remove"  actionListener="#{admUsuariosController.autorizacion('Rechazado')}"  update="msj form" value="RECHAZAR" immediate="true" >
                                    <p:confirm header="Confirmacion" message="¿Desea Rechazar Requerimiento ##{admUsuariosController.objetoSecundario.id} ?" icon="ui-icon-alert" />
                                </p:commandButton>

                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-backward"  oncomplete="PF('wdlEjecutaSQL').hide();"  value="SALIR" immediate="true" />
                            </h:panelGrid>
                        </center>


                    </h:form>
                </p:dialog>


                <!-- DIALOGO PERMISO SOBRE OBJETO-->
                <p:dialog  header="AYUDA CON PERMISO SOBRE OBJETO ##{admUsuariosController.objetoSecundario.id}" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlPermiso" id="dlgPermiso" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formPermiso">  

                        <h:panelGrid columns="1">
                            <center>
                                <h:panelGrid columns="6">
                                    <p:outputLabel   value="USUARIO SOLICITA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objetoSecundario.d_usuario}" style="width:230px"  />
                                    <p:outputLabel   value="FECHA"></p:outputLabel>
                                    <p:inputText readonly="true" value="#{admUsuariosController.objetoSecundario.fecha}" style="width:90px"/>

                                </h:panelGrid>
                            </center>

                            <h:panelGrid   columns="2" cellpadding="5">
                                <p:fieldset legend="Tipo de Permiso:" >
                                    <p:selectManyCheckbox  id="tipoPermiso" required="true" requiredMessage="Seleccione tipo de Permiso" value="#{admUsuariosController.objetoSecundario.tipo_comando}"  layout="grid" columns="4">
                                        <f:selectItem itemLabel="Select" itemValue="Select_TPP" />
                                        <f:selectItem itemLabel="Update" itemValue="Update_TPP" />
                                        <f:selectItem itemLabel="Delete" itemValue="Delete_TPP" />
                                        <f:selectItem itemLabel="Insert" itemValue="Insert_TPP" />
                                        <f:selectItem itemLabel="Truncate" itemValue="Truncate_TPP" />
                                        <f:selectItem itemLabel="Excecute" itemValue="Excecute_TPP" />
                                        <f:selectItem itemLabel="Debug" itemValue="Debug_TPP" />
                                        <f:selectItem itemLabel="Drop" itemValue="Drop_TPP" />
                                    </p:selectManyCheckbox>
                                </p:fieldset>
                                <p:fieldset legend="Ambiente Base de Datos:" >
                                    <p:selectOneRadio  id="ambiente" required="true" requiredMessage="Seleccione Ambiente" value="#{admUsuariosController.objetoSecundario.ambiente}"  layout="grid" columns="2">
                                        <f:selectItem itemLabel="Produccion" itemValue="Produccion_TPA" />
                                        <f:selectItem itemLabel="Mes Anterior" itemValue="Mes_Anterior_TPA" />
                                        <f:selectItem itemLabel="Testing" itemValue="Testing_TPA" />
                                    </p:selectOneRadio>
                                </p:fieldset>


                            </h:panelGrid>
                            <h:panelGrid   columns="4">
                                <p:outputLabel   value="Tipo Objeto:"></p:outputLabel>
                                <p:inputText required="true" requiredMessage="Ingrese tipo de objetos" value="#{admUsuariosController.objetoSecundario.tipo_objeto}"  />
                                <p:outputLabel   value="Nombre Objeto:"></p:outputLabel>
                                <p:inputText required="true" requiredMessage="Ingrese nombre de objetos" value="#{admUsuariosController.objetoSecundario.nombre_objeto}"   />

                            </h:panelGrid>

                            <p:commandButton styleClass="buttonOverRed" rendered="#{admUsuariosController.operacion.equalsIgnoreCase('U')?true:false}" style="color:black;background:gold;font-weight:bold" icon="fa fa-dedent"  value="Ver Requerimiento de Origen y la Documentacion" actionListener="#{admUsuariosController.ver_ayuda_Origen()}" update="dlgRequerimiento dlgCaso"/>

                            <p:outputLabel style="font-weight:bold"  value="DESCRIPCION DE LO SOLICITADO:"></p:outputLabel>
                            <p:inputTextarea required="true" requiredMessage="Ingrese la descripcion" rows="8" cols="60" value="#{admUsuariosController.objetoSecundario.descripcion}" autoResize="false" style="width:700px;height: 200px"/>






                        </h:panelGrid>

                        <center>
                            <h:panelGrid   columns="4" cellpadding="5">
                                <p:commandButton styleClass="buttonOverRed" disabled="#{admUsuariosController.disable_bt_autorizar()}" style="color:black;background:greenyellow;font-weight:bold" icon="fa fa-check-circle" actionListener="#{admUsuariosController.autorizacion('Sin Autorizar TI')}" update="msj form"  value="AUTORIZAR" immediate="true"  >
                                    <p:confirm header="Confirmacion" message="¿Desea Autorizar Requerimiento ##{admUsuariosController.objetoSecundario.id} ?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton styleClass="buttonOverBlack" disabled="#{admUsuariosController.disable_bt_autorizar()}" style="color:white;background:red ;font-weight:bold"  icon="fa fa-remove"  actionListener="#{admUsuariosController.autorizacion('Rechazado')}"  update="msj form" value="RECHAZAR" immediate="true" >
                                    <p:confirm header="Confirmacion" message="¿Desea Rechazar Requerimiento ##{admUsuariosController.objetoSecundario.id} ?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-backward"  oncomplete="PF('wdlPermiso').hide();"  value="SALIR" immediate="true" />
                            </h:panelGrid>
                        </center>


                    </h:form>
                </p:dialog>


                <script type="text/javascript">
                    function nextTab() {

                        PF('tabViewVar').select(1);

                    }
                </script>

                <!-- DIALOGO COMPETADO -->
                <p:dialog  header="COMPLETAR ##{admUsuariosController.objetoFinalizacion.id}" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlCompletado" id="dlgCompletado" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formCompletar">  

                        <p:tabView id="tabViewVar" widgetVar="tabViewVar" style="font-size:14px;background:#DEDDDD;" dynamic="true" cache="true" activeIndex="0">


                            <p:tab title="PAGINA #1"  >
                                <h:panelGrid columns="1">
                                    <center>
                                        <h:panelGrid columns="6">
                                            <p:outputLabel   value="SOLICITADO:"></p:outputLabel>
                                            <p:inputText readonly="true" value="#{admUsuariosController.objetoFinalizacion.d_usuario}" style="width:230px"  />
                                            <p:outputLabel   value="FECHA:"></p:outputLabel>
                                            <p:inputText readonly="true" value="#{admUsuariosController.objetoFinalizacion.fecha}" style="width:90px"/>
                                            <p:outputLabel   value="COMPLETADO:"></p:outputLabel>
                                            <p:inputText readonly="true" value="#{admUsuariosController.objetoFinalizacion.fecha_completado}" style="width:90px"/>

                                        </h:panelGrid>
                                    </center>

                                    <h:panelGrid   columns="2" cellpadding="5">
                                        <p:fieldset legend="Aplicativo Con Problemas:" >
                                            <p:selectManyCheckbox  id="aplicativo" required="true" requiredMessage="Seleccione aplicativo" value="#{admUsuariosController.objetoFinalizacion.aplicativo}"  layout="grid" columns="3">
                                                <f:selectItem itemLabel="Clientes" itemValue="Clientes_AP" />
                                                <f:selectItem itemLabel="Solicitudes" itemValue="Solicitudes_AP" />
                                                <f:selectItem itemLabel="Prestamos" itemValue="Prestamos_AP" />
                                                <f:selectItem itemLabel="Garantias" itemValue="Garantias_AP" />
                                                <f:selectItem itemLabel="Cuentas Ahorro" itemValue="Cuentas_Ahorro_AP" />
                                                <f:selectItem itemLabel="Deposito Plazo" itemValue="Deposito_Plazo_AP" />
                                                <f:selectItem itemLabel="Venta Seguros" itemValue="Venta_Seguros_AP" />
                                                <f:selectItem itemLabel="Caja" itemValue="Caja_AP" />
                                                <f:selectItem itemLabel="Contabilidad" itemValue="Contabilidad_AP" />
                                                <f:selectItem itemLabel="Otros" itemValue="Otros_AP" />

                                            </p:selectManyCheckbox>
                                            <p:inputText placeholder="Especifique otros.." value="#{admUsuariosController.objetoFinalizacion.especifique_otro}" style="width:450px"/>
                                        </p:fieldset>

                                        <p:fieldset legend="Aplicativo Padre:" >
                                            <p:selectManyCheckbox  id="aplicativoP" required="true" requiredMessage="Seleccione aplicativo Padre" value="#{admUsuariosController.objetoFinalizacion.aplicativo_primario}"  layout="grid" columns="1">
                                                <f:selectItem itemLabel="Topaz" itemValue="Topaz_AP" />
                                                <f:selectItem itemLabel="Anexos Topaz" itemValue="Anexos_Topaz_AP" />
                                                <f:selectItem itemLabel="Otros" itemValue="Otros_AP" />

                                            </p:selectManyCheckbox>
                                            <p:inputText placeholder="Especifique otros.." value="#{admUsuariosController.objetoFinalizacion.especifique_otro_primario}" style="width:200px"/>
                                        </p:fieldset>

                                    </h:panelGrid>
                                    <h:panelGrid   columns="4">
                                        <p:outputLabel   value="Desarrollador:"></p:outputLabel>
                                        <p:inputText  value="#{admUsuariosController.objetoFinalizacion.d_developer}" readonly="true" style="width:350px"  />
                                        <p:commandButton styleClass="buttonOverRed" style="color:black;background:gold;font-weight:bold" icon="fa fa-dedent"  value="Requerimiento Origen" oncomplete="PF('wdlDocumentacion').show();" actionListener="#{admUsuariosController.listarDocumentacion()}" immediate="true" update="dlgDocumentacion dlgRequerimiento dlgCaso dlgEjecutaSQL dlgPermiso"/>
                                        <h:commandLink id="reporte" value="Ver Formato en PDF" target="_black" actionListener="#{admUsuariosController.verFormadoFinPDF('Aceptacion')}" />
                                    </h:panelGrid>
                                    <p:outputLabel style="font-weight:bold"  value="DETALLE DE LA SOLUCION:"></p:outputLabel>
                                    <h:panelGrid   columns="2">
                                        <p:inputTextarea  rows="7" cols="60" value="#{admUsuariosController.objetoFinalizacion.descripcion_solucion}" autoResize="false" style="width:500px;height: 190px"/>

                                        <p:fieldset legend="Tipo de Archivo:" >
                                            <p:selectManyCheckbox  id="tipoArchivo"  value="#{admUsuariosController.objetoFinalizacion.tipo_archivo}"  layout="grid" columns="1">
                                                <f:selectItem itemLabel="Reporte" itemValue="Reporte_TP" />
                                                <f:selectItem itemLabel="Operacion" itemValue="Opercion_TP" />
                                                <f:selectItem itemLabel="Procedimiento Almacedado" itemValue="Procedimiento_TP" />
                                                <f:selectItem itemLabel="Otros" itemValue="Otros_TP" />


                                            </p:selectManyCheckbox>
                                            <p:inputText placeholder="Especifique otros.." value="#{admUsuariosController.objetoFinalizacion.especifique_otro_tipo_archivo }" style="width:150px"/>
                                        </p:fieldset>


                                    </h:panelGrid>
                                    <center>
                                        <h:panelGrid   columns="5">

                                            <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-step-forward" onclick="nextTab();" value="SIGUIENTE PAGINA" update="formCompletar:tabViewVar"/>

                                        </h:panelGrid>
                                    </center>



                                </h:panelGrid>
                            </p:tab>

                            <p:tab title="PAGINA #2"  >
                                <h:panelGrid columns="1">
                                    <p:fieldset legend="Origen de Falla:" >
                                        <p:selectManyCheckbox  id="origenfalla" value="#{admUsuariosController.objetoFinalizacion.origen_problema}"  layout="grid" columns="4">
                                            <f:selectItem itemLabel="Problema Comunicacion" itemValue="Problema_Comunica_OP" />
                                            <f:selectItem itemLabel="Fallo Impresora" itemValue="Fallo_Impresora_OP" />
                                            <f:selectItem itemLabel="Falta Conocimiento Politica" itemValue="Falta_Conoc_OP" />
                                            <f:selectItem itemLabel="Por Aplicativo" itemValue="Por_Aplicativo_OP" />
                                            <f:selectItem itemLabel="Problema de Saldo" itemValue="Problema_Saldo_OP" />
                                            <f:selectItem itemLabel="Por Usuario" itemValue="Por_Usuario_OP" />
                                            <f:selectItem itemLabel="No Conoce el Programa" itemValue="No_Conoce_Pro_OP" />
                                            <f:selectItem itemLabel="Otro Motivo" itemValue="Otro_OP" />

                                        </p:selectManyCheckbox>
                                        <center>
                                            <p:inputText placeholder="Especifique otros.." value="#{admUsuariosController.objetoFinalizacion.especifique_otro_origen}" style="width:450px"/>
                                        </center>

                                    </p:fieldset>

                                    <h:panelGrid   columns="2">
                                        <p:outputLabel   value="Ubicacion del archivo modificado"></p:outputLabel>
                                        <p:inputText  value="#{admUsuariosController.objetoFinalizacion.ubicacion_archivo}" style="width:520px"  />

                                    </h:panelGrid>
                                    <h:panelGrid   columns="4">
                                        <p:outputLabel for="usertest"  value="Usuario Realizo Pruebas:"></p:outputLabel>
                                        <p:inputText id="usertest" required="true" requiredMessage="Ingrese el nombre de la persona que realizo las pruebas" value="#{admUsuariosController.objetoFinalizacion.persona_pruebas}"  style="width:200px"  />
                                        <p:outputLabel  for="usertime" value="Duraccion de Pruebas:"></p:outputLabel>
                                        <p:inputText id="usertime" required="true" requiredMessage="Ingrese el tiempo de las pruebas" value="#{admUsuariosController.objetoFinalizacion.duraccion_pruebas}"  style="width:200px"  />
                                    </h:panelGrid>

                                    <p:outputLabel for="obser" style="font-weight:bold"  value="Observaciones de las Pruebas:"></p:outputLabel>
                                    <p:inputTextarea id="obser" required="true" requiredMessage="Ingrese observacion de las pruebas" rows="8" cols="60" value="#{admUsuariosController.objetoFinalizacion.observacion_pruebas}" autoResize="false" style="width:760px;height: 60px"/>


                                    <p:fieldset legend="Resolucion:" >
                                        <p:outputPanel id="customPanel" style="margin-bottom:10px">
                                            <p:selectOneRadio id="customRadio" required="true" requiredMessage="Seleccione la Resolucion" value="#{admUsuariosController.objetoFinalizacion.resolucion}" layout="custom">
                                                <f:selectItem itemLabel="Aceptacion" itemValue="Aceptacion" />
                                                <f:selectItem itemLabel="Rechazo" itemValue="Rechazo" />
                                                <f:selectItem itemLabel="Reformulacion" itemValue="Reformulacion" />
                                            </p:selectOneRadio>

                                            <h:panelGrid columns="3" cellpadding="5">

                                                <h:panelGrid columns="2" >
                                                    <p:radioButton id="opt1" for="customRadio" itemIndex="0"  />
                                                    <h:outputLabel for="opt1" value="Aceptacion" />
                                                </h:panelGrid>
                                                <h:panelGrid columns="2" >
                                                    <p:radioButton id="opt2" for="customRadio" itemIndex="1" />
                                                    <h:outputLabel for="opt2" value="Rechazo" />
                                                </h:panelGrid>
                                                <h:panelGrid columns="2" >
                                                    <p:radioButton id="opt3" for="customRadio" itemIndex="2" />
                                                    <h:outputLabel for="opt3" value="Reformulacion" />
                                                </h:panelGrid>

                                                <p:inputTextarea  rows="8" cols="60" value="#{admUsuariosController.objetoFinalizacion.descripcion_acepto}" autoResize="false" style="width:230px;height: 50px"/>
                                                <p:inputTextarea  rows="8" cols="60" value="#{admUsuariosController.objetoFinalizacion.descripcion_rechazo}" autoResize="false" style="width:230px;height: 50px"/>
                                                <p:inputTextarea  rows="8" cols="60" value="#{admUsuariosController.objetoFinalizacion.descripcion_refurmulo}" autoResize="false" style="width:230px;height: 50px"/>


                                            </h:panelGrid>
                                        </p:outputPanel>



                                    </p:fieldset>


                                </h:panelGrid>
                                <center>
                                    <h:panelGrid   columns="5">
                                        <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-step-forward" actionListener="#{admUsuariosController.actualizarEstadoCompletado()}" value="FINALIZAR" update="msj form" />
                                    </h:panelGrid>

                                </center>

                            </p:tab>
                        </p:tabView>




                    </h:form>
                </p:dialog>


                <!-- Documentacion-->
                <p:dialog  header="Documentacion"  style="font-size:14px;background:#DEDDDD;" widgetVar="wdlDocumentacion" id="dlgDocumentacion" showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formDocumentacion" enctype="multipart/form-data">  

                        <p:panelGrid   columns="1" >
                            <h4>Documentacion</h4>
                            <p:dataTable id="tablaD" emptyMessage="No hay datos" scrollable="true" scrollHeight="177"  style="width: 600px;height: 200px; font-size:12px;;font-weight:bold" value="#{admUsuariosController.lstDocuemtacion}" var="doc" >

                                <p:column headerText="ID" style="width:10px;">
                                    <p:outputLabel value="#{doc.id}" />
                                </p:column>
                                <p:column headerText="NOMBRE" style="width:100px;">
                                    <p:outputLabel value="#{doc.nombre_corto}" />
                                </p:column>
                                <p:column headerText="TIPO" style="width:80px;">
                                    <p:outputLabel value="#{doc.d_tipo_registro}" />
                                </p:column>
                                <p:column headerText="ESTADO" style="width:80px;">
                                    <p:outputLabel value="#{doc.estado}" />
                                </p:column>

                                <p:column headerText="VER" style="width:20px;">
                                    <center>                                          
                                        <p:commandButton styleClass="buttonOverRed" icon="fa fa-eye" style="color:black;background:gold;font-weight:bold" actionListener="#{admUsuariosController.ver_Origen_Completar(doc)}" immediate="true"  update="dlgCaso dlgPermiso dlgEjecutaSQL dlgRequerimiento"   />
                                    </center>
                                </p:column>
                            </p:dataTable>

                        </p:panelGrid>




                        <center>
                            <h:panelGrid   columns="1" cellpadding="5">

                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-backward"  oncomplete="PF('wdlDocumentacion').hide();"  value="CERRAR" immediate="true" />
                            </h:panelGrid>
                        </center>


                    </h:form>
                </p:dialog> 


                <!-- Dialogo solicitud carga nueva estructura-->
                <p:dialog  header="SOLICITUD CARGA ESTRUCTURA" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlCargaProce" id="dlgCargaProce"  showEffect="fold" hideEffect="explode" resizable="false">
                    <h:form id="formCargaPro">  
                        <center>
                            <h:panelGrid columns="6">
                                <p:outputLabel   value="USUARIO SOLICITA"></p:outputLabel>
                                <p:inputText readonly="true" value="#{admUsuariosController.objetoSecundario.d_usuario}" style="width:300px"  />
                                <p:outputLabel   value="FECHA"></p:outputLabel>
                                <p:inputText readonly="true" value="#{admUsuariosController.objetoSecundario.fecha}" style="width:90px"/>
                            </h:panelGrid>
                        </center>
                        <h:panelGrid columns="2">


                            <h:panelGrid columns="1">

                                <h:panelGrid columns="2">
                                    <h:panelGrid columns="1">
                                        <p:outputLabel   value="NOMBRE ESTRUCTURA"></p:outputLabel>
                                        <p:inputText value="#{admUsuariosController.objetoSecundario.nombre_corto}" style="width:310px;text-transform: uppercase"   />
                                    </h:panelGrid>

                                    <p:commandButton  styleClass="buttonOverRed" style="color:black;background:greenyellow;font-weight:bold; margin-left: 50px" icon="fa fa-code" value="NUEVO SCRIPT SQL" oncomplete="var htmlTag = document.getElementById('dlgCodigo');htmlTag.style.height = Math.floor(window.innerHeight*0.7)+'px';PF('wdlCodigo').show();"   update=":msj :dlgCodigo"  />



                                </h:panelGrid>



                                <h:panelGrid   columns="3" cellpadding="5">
                                    <p:fieldset legend="Tarea a Realizar" style="margin-bottom:5px">
                                        <p:selectOneRadio id="prioridad" value="#{admUsuariosController.objetoSecundario.tarea}" >
                                            <f:selectItem itemLabel="Crear" itemValue="Crear" />
                                            <f:selectItem itemLabel="Modificar" itemValue="Modificar" />
                                            <f:selectItem itemLabel="Eliminar" itemValue="Eliminar" />
                                        </p:selectOneRadio>
                                    </p:fieldset>
                                    <p:fieldset legend="Ambiente" style="margin-bottom:5px">
                                        <p:selectOneMenu  value="#{admUsuariosController.objetoSecundario.ambiente}" effect="fold" style="width:160px">
                                            <f:selectItem itemLabel="Seleccione" itemValue=""/>
                                            <f:selectItem itemLabel="Produccion" itemValue="Produccion" />
                                            <f:selectItem itemLabel="Pruebas" itemValue="Pruebas" />
                                            <f:selectItem itemLabel="Desarrollo" itemValue="Desarrollo" />
                                            <f:selectItem itemLabel="Mes Anterior" itemValue="Anterior" />
                                            <f:selectItem itemLabel="Liberaciones" itemValue="Liberaciones" />
                                            <f:selectItem itemLabel="Db Eventuales" itemValue="Db Eventuales" />
                                            <f:selectItem itemLabel="Abanks" itemValue="Abanks" />
                                            <f:selectItem itemLabel="Branch" itemValue="Branch" />
                                            <f:selectItem itemLabel="Perdida" itemValue="Perdida" />
                                        </p:selectOneMenu>
                                    </p:fieldset>
                                </h:panelGrid>
                                <p:fieldset legend="Objeto Afectado" style="margin-bottom:5px" >
                                    <p:selectOneRadio value="#{admUsuariosController.objetoSecundario.objetoTarea}" layout="grid" columns="5">
                                        <f:selectItem itemLabel="Tabla" itemValue="Tabla" />
                                        <f:selectItem itemLabel="Constraint" itemValue="Constraint" />
                                        <f:selectItem itemLabel="Index" itemValue="Index" />
                                        <f:selectItem itemLabel="Synonsym" itemValue="Synonsym" />
                                        <f:selectItem itemLabel="Role" itemValue="Role" />
                                        <f:selectItem itemLabel="User" itemValue="User" />
                                        <f:selectItem itemLabel="Profile" itemValue="Profile" />
                                        <f:selectItem itemLabel="Funcion" itemValue="Funcion" />
                                        <f:selectItem itemLabel="Trigger" itemValue="Trigger" />
                                        <f:selectItem itemLabel="Paquetes" itemValue="Paquetes" />
                                        <f:selectItem itemLabel="Procedimiento" itemValue="Procedimiento" />
                                        <f:selectItem itemLabel="Privilegio" itemValue="Privilegio" />
                                        <f:selectItem itemLabel="Job" itemValue="Job" />
                                        <f:selectItem itemLabel="Export" itemValue="Export" />
                                        <f:selectItem itemLabel="Import" itemValue="Import" />
                                        <f:selectItem itemLabel="Vista" itemValue="Vista" />
                                    </p:selectOneRadio>
                                </p:fieldset>
                                <h:panelGrid   columns="3" cellpadding="5">
                                    <p:outputLabel   value="USUARIOS QUE LO UTILIZARAN:"></p:outputLabel>
                                    <p:chips
                                        id="chips"
                                        widgetVar="pf-chips"
                                        value="#{admUsuariosController.objetoSecundario.des_usuarios_utilizan}"
                                        styleClass="width:280px;max-height: 20px;"
                                        onblur="
                                            var e = document.createEvent('Event');
                                            e.initEvent('keydown');
                                            e.keyCode = 13;
                                            e.which = 13;
                                            PF('pf-chips').input[0].dispatchEvent(e);
                                        "
                                        onkeypress="
                                            if(event.keyCode===32 || event.keyCode===44)
                                            {
                                               var e = document.createEvent('Event');
                                                e.initEvent('keydown');
                                                e.keyCode = 13;
                                                e.which = 13;
                                                PF('pf-chips').input[0].dispatchEvent(e);
                                            }"
                                       
                                            ><p:keyFilter regEx="/[a-z0-9_]/i"/>  
                                    </p:chips>


                                </h:panelGrid>

                                <p:fieldset legend="Actividades que podran realizar los usuarios" style="margin-bottom:5px">
                                    <p:selectManyCheckbox  value="#{admUsuariosController.objetoSecundario.actividades_usuarios}"  >
                                        <f:selectItem itemLabel="Insert" itemValue="Insert_AC" />
                                        <f:selectItem itemLabel="Update" itemValue="Update_AC" />
                                        <f:selectItem itemLabel="Select" itemValue="Select_AC" />
                                        <f:selectItem itemLabel="Delete" itemValue="Delete_AC" />
                                    </p:selectManyCheckbox>
                                </p:fieldset>
                            </h:panelGrid>
                            <h:panelGrid columns="1">
                                <h:panelGrid columns="2">
                                    <p:commandButton styleClass="buttonOverRed" style="color:black;background:gold;font-weight:bold" icon="fa fa-dedent"  value="Requerimiento Origen" actionListener="#{admUsuariosController.ver_origen_estructura()}" oncomplete="PF('wdlRequerimiento').show();" immediate="true" update="msj dlgRequerimiento"/>
                                    <h:commandLink id="reporte" value="Ver Formato en PDF" target="_black" actionListener="#{admUsuariosController.verFormatoSubPDF_Sec('Estructura')}" />
                                </h:panelGrid>
                                <p:panel header="Estructura de Tabla" style="min-width: 410px;max-width: 410px;margin-left: -10px; padding:0px; ">
                                    <h:panelGrid columns="1"  >
                                        <p:dataTable id="tablaSQL"  emptyMessage="No hay datos" scrollable="true" scrollHeight="360"  style="font-size:9px;min-width: 400px;max-width: 400px;margin-left:-15px; padding:0px;height: 380px " value="#{admUsuariosController.objetoSecundario.lstTabla}" var="tbl" editable="true" editMode="cell" widgetVar="cellCars">
                                            <p:column headerText="NOMBRE CAMPO" style="width:60px;">

                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{tbl.nombre}" /></f:facet>
                                                    <f:facet name="input"><p:inputText value="#{tbl.nombre}" style="width:96%"/></f:facet>
                                                </p:cellEditor>

                                            </p:column>
                                            <p:column headerText="TIPO" style="width:20px">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{tbl.tipo}" /></f:facet>
                                                    <f:facet name="input"><p:inputText value="#{tbl.tipo}" style="width:96%"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            <p:column headerText="LONGITUD" style="width:20px">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{tbl.tamano}" /></f:facet>
                                                    <f:facet name="input"><p:inputText value="#{tbl.tamano}" style="width:96%"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            <p:column headerText="CONSTRAINT" style="width:20px">
                                                <p:cellEditor>
                                                    <f:facet name="output"><h:outputText value="#{tbl.constraint}" /></f:facet>
                                                    <f:facet name="input"><p:inputText value="#{tbl.constraint}" style="width:96%"/></f:facet>
                                                </p:cellEditor>
                                            </p:column>

                                        </p:dataTable>
                                    </h:panelGrid>
                                </p:panel>

                            </h:panelGrid>

                        </h:panelGrid>
                        <h:panelGrid   columns="2">
                            <p:outputLabel   value="NOTA:"></p:outputLabel>
                            <p:inputText value="#{admUsuariosController.objetoSecundario.notas}" style="width:980px"/>
                        </h:panelGrid>

                         <center>
                            <h:panelGrid   columns="4" cellpadding="5">
                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:greenyellow;font-weight:bold" icon="fa fa-check-circle" actionListener="#{admUsuariosController.autorizacion('Sin Autorizar TI')}" update="msj form"  value="AUTORIZAR" immediate="true"  >
                                    <p:confirm header="Confirmacion" message="¿Desea Autorizar Estructura ##{admUsuariosController.objetoSecundario.id} ?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton styleClass="buttonOverBlack" style="color:white;background:red ;font-weight:bold"  icon="fa fa-remove"  actionListener="#{admUsuariosController.autorizacion('Rechazado')}"  update="msj form" value="RECHAZAR" immediate="true" >
                                    <p:confirm header="Confirmacion" message="¿Desea Rechazar Estructura ##{admUsuariosController.objetoSecundario.id} ?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton styleClass="buttonOverRed" style="color:black;background:goldenrod ;font-weight:bold" icon="fa fa-backward"  oncomplete="PF('wdlCargaProce').hide();"  value="SALIR" immediate="true" />
                            </h:panelGrid>
                        </center>
                    </h:form>
                </p:dialog> 


                     <!-- Dialogo script-->
                <p:dialog  header="script" style="font-size:14px;background:#DEDDDD;" widgetVar="wdlCodigo" id="dlgCodigo" width="70%" height="100%" modal="true" appendTo="@(body)" showEffect="fold" hideEffect="explode" resizable="false" >
                    <h:form id="formCodigo">  
                        <p:inputTextarea value="#{admUsuariosController.objetoSecundario.scriptSQL}" style="width: 100% !important;height: 100% !important;"  rows="28" autoResize="false" />

                        <center>
                            <h:panelGrid   columns="1" cellpadding="5">
                                <p:commandButton  styleClass="buttonOverRed" style="color:black;background:gold;font-weight:bold " icon="fa fa-check-circle" value="Establecer" oncomplete="PF('wdlCodigo').hide();" update=":msj :form" />
                            </h:panelGrid>
                        </center>
                    </h:form>
                </p:dialog>
                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
                <p:dialog modal="true" appendTo="@(body)" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false" showHeader="false">
                    <p:graphicImage name="#{admUsuariosController.imgLoadin}" />
                </p:dialog>


            </ui:define>
        </ui:composition>



    </h:body>
</html>

